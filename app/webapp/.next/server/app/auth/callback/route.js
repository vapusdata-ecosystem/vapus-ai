(()=>{var e={};e.id=5015,e.ids=[5015],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28469:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>S,routeModule:()=>R,serverHooks:()=>O,workAsyncStorage:()=>v,workUnitAsyncStorage:()=>E});var n={};r.r(n),r.d(n,{GET:()=>w});var o=r(96559),a=r(48088),s=r(37719),i=r(32190);let c="",l=e=>{if("undefined"==typeof document)return null;let t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?t.pop().split(";").shift():null},u=()=>{let e=l("access_token");e&&!c&&(c=e)},d=()=>(c||u(),c),f=e=>{let t=[];try{return[JSON.parse(e)]}catch(e){console.log("Parsing as streaming response...")}if(e.includes("data:"))return p(e);for(let r of e.split(/(?<=})\s*(?={)/)){let e=r.trim();if(e)try{let r=JSON.parse(e);t.push(r)}catch(t){console.error("Failed to parse chunk:",e,t)}}return t},p=e=>{let t=[];for(let r of e.split("\n")){let e=r.trim();if(e&&"data: [DONE]"!==e&&"[DONE]"!==e&&e.startsWith("data: ")){let r=e.substring(6);try{let e=JSON.parse(r);t.push(e)}catch(e){console.error("Failed to parse SSE chunk:",r,e)}}}return t},h=e=>{if(!e||0===e.length)return null;if(1===e.length)return e[0];let t="",r=null;for(let n of e)n.result?.choices?.[0]?.messages?.content?(t+=n.result.choices[0].messages.content,r=n):n.choices?.[0]?.delta?.content&&(t+=n.choices[0].delta.content,r=n);if(r&&t){if(r.result?.choices?.[0]?.messages)return{...r,result:{...r.result,choices:[{...r.result.choices[0],messages:{...r.result.choices[0].messages,content:t}}]}};if(r.choices?.[0]?.delta)return{result:{created:r.created,model:r.model,object:"chat.completion",choices:[{messages:{role:"assistant",content:t,structuredContent:[],toolCalls:[]},finishReason:r.choices[0].finish_reason||"",index:r.choices[0].index||"0",delta:null}],usage:[],event:"data",id:r.id,serviceTier:"",systemFingerprint:r.system_fingerprint||""}}}return e[e.length-1]},b=async(e,t,r,n={})=>{console.log("submit the data",r);let o=d(),a=`http://127.0.0.1:9017${e}`,s={method:t,headers:{authorization:`Bearer ${o}`,"Content-Type":"application/json",...n.headers||{}},redirect:"follow",...Object.fromEntries(Object.entries(n).filter(([e])=>"headers"!==e))};r&&(s.body=JSON.stringify(r));let i=await fetch(a,s);if(!i.ok)throw Error(`API error: ${i.status}`);return h(f(await i.text()))},g={loginCallback:"/api/v1alpha1/login/callback"},y={getLoginCallback:e=>b(g.loginCallback,"POST",e)};var m=r(99933);r(86280),r(73913);let k={loginPath:"/login",callbackPath:"/auth/callback",homePath:"/dashboard",accessTokenCookieName:"access_token",idTokenCookieName:"id_token",cookiePath:"/"};async function w(e){let{searchParams:t}=new URL(e.url),r=t.get("code"),n=await (0,m.U)();if(!r)return i.NextResponse.redirect(new URL(k.loginPath,e.url));try{let t={code:r,host:`http://127.0.0.1:9014${k.callbackPath}`},o=await y.getLoginCallback(t);if(!o?.token?.accessToken)return i.NextResponse.redirect(new URL(`${k.loginPath}?register=true`,e.url));let a=n.get("loginRedirectUrl")?.value||k.homePath,s=o.token.validTill-Math.floor(Date.now()/1e3),c=`
      <!DOCTYPE html>
      <html>
      <head><title>Logging in...</title></head>
      <body>
        <script>
          // Set the cookies with expiry, path and SameSite=Lax
          const expires = new Date(Date.now() + ${s} * 1000).toUTCString();
          document.cookie = "${k.idTokenCookieName}=${o.token.idToken}; path=${k.cookiePath}; expires=" + expires + "; SameSite=Lax";
          document.cookie = "${k.accessTokenCookieName}=${o.token.accessToken}; path=${k.cookiePath}; expires=" + expires + "; SameSite=Lax";

          // Clear loginRedirectUrl cookie by setting expiration in the past
          document.cookie = "loginRedirectUrl=; path=${k.cookiePath}; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Lax";

          // Redirect to the original page
          window.location.href = "${a}";
        </script>
        <p>Logging in, please wait...</p>
      </body>
      </html>
    `;return new i.NextResponse(c,{status:200,headers:{"Content-Type":"text/html"}})}catch(t){return console.error("Login callback error:",t),i.NextResponse.redirect(new URL(`${k.loginPath}?error=callback_error`,e.url))}}let R=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/auth/callback/route",pathname:"/auth/callback",filename:"route",bundlePath:"app/auth/callback/route"},resolvedPagePath:"/Users/vikrantsingh/vikrant/workspaces/anekam/vapusdata/vapusdata-ecosystem/vapusdata-oss/vapus-ai/app/webapp/src/app/auth/callback/route.js",nextConfigOutput:"",userland:n}),{workAsyncStorage:v,workUnitAsyncStorage:E,serverHooks:O}=R;function S(){return(0,s.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:E})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73913:(e,t,r)=>{"use strict";let n=r(63033),o=r(29294),a=r(84971),s=r(76926),i=r(80023),c=r(98479),l=new WeakMap;function u(e){let t=new d(e),r=Promise.resolve(t);return Object.defineProperty(r,"isEnabled",{get:()=>t.isEnabled,set(e){Object.defineProperty(r,"isEnabled",{value:e,writable:!0,enumerable:!0})},enumerable:!0,configurable:!0}),r.enable=t.enable.bind(t),r.disable=t.disable.bind(t),r}class d{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){p("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){p("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}let f=(0,s.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})});function p(e){let t=o.workAsyncStorage.getStore(),r=n.workUnitAsyncStorage.getStore();if(t){if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});if("after"===r.phase)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(r){if("prerender"===r.type){let n=Object.defineProperty(Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});(0,a.abortAndThrowOnSynchronousRequestDataAccess)(t.route,e,n,r)}else if("prerender-ppr"===r.type)(0,a.postponeWithTracking)(t.route,e,r.dynamicTracking);else if("prerender-legacy"===r.type){r.revalidate=0;let n=Object.defineProperty(new c.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}}}}},76926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return c}});let n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(n,s,i):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(61120));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}let a={current:null},s="function"==typeof n.cache?n.cache:e=>e,i=console.warn;function c(e){return function(...t){i(e(...t))}}s(e=>{try{i(a.current)}finally{a.current=null}})},78335:()=>{},86280:(e,t,r)=>{"use strict";let n=r(92584),o=r(29294),a=r(63033),s=r(84971),i=r(80023),c=r(68388),l=r(76926),u=(r(44523),r(8719)),d=new WeakMap;function f(e){let t=d.get(e);if(t)return t;let r=Promise.resolve(e);return d.set(e,r),Object.defineProperties(r,{append:{value:e.append.bind(e)},delete:{value:e.delete.bind(e)},get:{value:e.get.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},getSetCookie:{value:e.getSetCookie.bind(e)},forEach:{value:e.forEach.bind(e)},keys:{value:e.keys.bind(e)},values:{value:e.values.bind(e)},entries:{value:e.entries.bind(e)},[Symbol.iterator]:{value:e[Symbol.iterator].bind(e)}}),r}function p(e){return"string"==typeof e?`'${e}'`:"..."}let h=(0,l.createDedupedByCallsiteServerErrorLoggerDev)(b);function b(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})}},92584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return a},ReadonlyHeadersError:function(){return o}});let n=r(43763);class o extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new o}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,o){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,o);let a=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==s)return n.ReflectAdapter.get(t,s,o)},set(t,r,o,a){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,o,a);let s=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===s);return n.ReflectAdapter.set(t,i??r,o,a)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let o=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===o);return void 0!==a&&n.ReflectAdapter.has(t,a)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let o=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===o);return void 0===a||n.ReflectAdapter.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return o.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},94069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return f},ReadonlyRequestCookiesError:function(){return i},RequestCookiesAdapter:function(){return c},appendMutableCookies:function(){return d},areCookiesMutableInCurrentPhase:function(){return h},getModifiedCookieValues:function(){return u},responseCookiesToRequestCookies:function(){return g},wrapWithMutableAccessCheck:function(){return p}});let n=r(23158),o=r(43763),a=r(29294),s=r(63033);class i extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new i}}class c{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return i.callable;default:return o.ReflectAdapter.get(e,t,r)}}})}}let l=Symbol.for("next.mutated.cookies");function u(e){let t=e[l];return t&&Array.isArray(t)&&0!==t.length?t:[]}function d(e,t){let r=u(t);if(0===r.length)return!1;let o=new n.ResponseCookies(e),a=o.getAll();for(let e of r)o.set(e);for(let e of a)o.set(e);return!0}class f{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let s=[],i=new Set,c=()=>{let e=a.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),s=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of s){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},u=new Proxy(r,{get(e,t,r){switch(t){case l:return s;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),u}finally{c()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),u}finally{c()}};default:return o.ReflectAdapter.get(e,t,r)}}});return u}}function p(e){let t=new Proxy(e,{get(e,r,n){switch(r){case"delete":return function(...r){return b("cookies().delete"),e.delete(...r),t};case"set":return function(...r){return b("cookies().set"),e.set(...r),t};default:return o.ReflectAdapter.get(e,r,n)}}});return t}function h(e){return"action"===e.phase}function b(e){if(!h((0,s.getExpectedRequestStore)(e)))throw new i}function g(e){let t=new n.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},96487:()=>{},99933:(e,t,r)=>{"use strict";Object.defineProperty(t,"U",{enumerable:!0,get:function(){return f}});let n=r(94069),o=r(23158),a=r(29294),s=r(63033),i=r(84971),c=r(80023),l=r(68388),u=r(76926),d=(r(44523),r(8719));function f(){let e="cookies",t=a.workAsyncStorage.getStore(),r=s.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(t.forceStatic)return h(n.RequestCookiesAdapter.seal(new o.RequestCookies(new Headers({}))));if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(r){if("prerender"===r.type)return function(e,t){let r=p.get(t);if(r)return r;let n=(0,l.makeHangingPromise)(t.renderSignal,"`cookies()`");return p.set(t,n),Object.defineProperties(n,{[Symbol.iterator]:{value:function(){let r="`cookies()[Symbol.iterator]()`",n=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},size:{get(){let r="`cookies().size`",n=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},get:{value:function(){let r;r=0==arguments.length?"`cookies().get()`":`\`cookies().get(${b(arguments[0])})\``;let n=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},getAll:{value:function(){let r;r=0==arguments.length?"`cookies().getAll()`":`\`cookies().getAll(${b(arguments[0])})\``;let n=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},has:{value:function(){let r;r=0==arguments.length?"`cookies().has()`":`\`cookies().has(${b(arguments[0])})\``;let n=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},set:{value:function(){let r;if(0==arguments.length)r="`cookies().set()`";else{let e=arguments[0];r=e?`\`cookies().set(${b(e)}, ...)\``:"`cookies().set(...)`"}let n=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},delete:{value:function(){let r;r=0==arguments.length?"`cookies().delete()`":1==arguments.length?`\`cookies().delete(${b(arguments[0])})\``:`\`cookies().delete(${b(arguments[0])}, ...)\``;let n=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},clear:{value:function(){let r="`cookies().clear()`",n=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}},toString:{value:function(){let r="`cookies().toString()`",n=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,n,t)}}}),n}(t.route,r);"prerender-ppr"===r.type?(0,i.postponeWithTracking)(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&(0,i.throwToInterruptStaticGeneration)(e,t,r)}(0,i.trackDynamicDataInDynamicRender)(t,r)}let u=(0,s.getExpectedRequestStore)(e);return h((0,n.areCookiesMutableInCurrentPhase)(u)?u.userspaceMutableCookies:u.cookies)}let p=new WeakMap;function h(e){let t=p.get(e);if(t)return t;let r=Promise.resolve(e);return p.set(e,r),Object.defineProperties(r,{[Symbol.iterator]:{value:e[Symbol.iterator]?e[Symbol.iterator].bind(e):m.bind(e)},size:{get:()=>e.size},get:{value:e.get.bind(e)},getAll:{value:e.getAll.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},delete:{value:e.delete.bind(e)},clear:{value:"function"==typeof e.clear?e.clear.bind(e):k.bind(e,r)},toString:{value:e.toString.bind(e)}}),r}function b(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name?`'${e.name}'`:"string"==typeof e?`'${e}'`:"..."}let g=(0,u.createDedupedByCallsiteServerErrorLoggerDev)(y);function y(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})}function m(){return this.getAll().map(e=>[e.name,e]).values()}function k(e){for(let e of this.getAll())this.delete(e.name);return e}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[4447,580],()=>r(28469));module.exports=n})();